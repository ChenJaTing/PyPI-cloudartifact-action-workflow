name: PyPI CloudArtifact Action Demo

on:
  push:
    branches: [ master1 ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      # Runs a set of commands using the runners shell
      - name: Run a multi-line script
        run: |
          python --version
          pip --version
          pip install twine
          twine --version
          mv .pypirc  ~/.pypirc
          cat ~/.pypirc
          python setup.py bdist_wheel bdist_egg  sdist
          ls -al dist/
          twine upload -r pypi dist/*
